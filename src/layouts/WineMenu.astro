---
import yaml from 'js-yaml';
import fs from 'fs';

import MenuLayout from "@layouts/MenuLayout.astro";
import MenuItem from "@components/MenuItem.astro";
import PageSection from "@components/PageSection.astro";

let viniRossi: any[] = [];
let viniBianchi: any[] = [];
let viniRosati: any[] = [];
let viniVivaci: any[] = [];
let viniSpumanti: any[] = [];
try {
    viniRossi = yaml.load(fs.readFileSync('oreste/vini-rossi.yaml', 'utf8')) as any[];
    viniBianchi = yaml.load(fs.readFileSync('oreste/vini-bianchi.yaml', 'utf8')) as any[];
    viniRosati = yaml.load(fs.readFileSync('oreste/vini-rosati.yaml', 'utf8')) as any[];
    viniVivaci = yaml.load(fs.readFileSync('oreste/vini-vivaci.yaml', 'utf8')) as any[];
    viniSpumanti = yaml.load(fs.readFileSync('oreste/vini-spumanti.yaml', 'utf8')) as any[];
} catch (e) {
  console.log(e);
}

import { getLangFromUrl, useTranslations, useDataTranslations } from '@i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { d } = useDataTranslations(lang);
---

<MenuLayout title={t("menu.wine.title")} description={t("menu.wine.description")}>
    <PageSection title={t("menu.wine.vini-rossi")}>
        {viniRossi.map((vino) => (
            <MenuItem
                name={d(vino.name)!}
                description={d(vino.description)}
                image={d(vino.image)}
                producer={d(vino.producer)}
                location={d(vino.location)}
                tags={d(vino.tags)}
                glass={d(vino.glass)}
                bottle={d(vino.bottle)}
                available={d(vino.available)!}
                visible={d(vino.visible)!}
            />
        ))}
    </PageSection>

    <PageSection title={t("menu.wine.vini-bianchi")}>
        {viniBianchi.map((vino) => (
            <MenuItem
                name={d(vino.name)!}
                description={d(vino.description)}
                image={d(vino.image)}
                producer={d(vino.producer)}
                location={d(vino.location)}
                tags={d(vino.tags)}
                glass={d(vino.glass)}
                bottle={d(vino.bottle)}
                available={d(vino.available)!}
                visible={d(vino.visible)!}
            />
        ))}
    </PageSection>

    <PageSection title={t("menu.wine.vini-rosati")}>
        {viniRosati.map((vino) => (
            <MenuItem
                name={d(vino.name)!}
                description={d(vino.description)}
                image={d(vino.image)}
                producer={d(vino.producer)}
                location={d(vino.location)}
                tags={d(vino.tags)}
                glass={d(vino.glass)}
                bottle={d(vino.bottle)}
                available={d(vino.available)!}
                visible={d(vino.visible)!}
            />
        ))}
    </PageSection>

    <PageSection title={t("menu.wine.vini-vivaci")}>
        {viniVivaci.map((vino) => (
            <MenuItem
                name={d(vino.name)!}
                description={d(vino.description)}
                image={d(vino.image)}
                producer={d(vino.producer)}
                location={d(vino.location)}
                tags={d(vino.tags)}
                glass={d(vino.glass)}
                bottle={d(vino.bottle)}
                available={d(vino.available)!}
                visible={d(vino.visible)!}
            />
        ))}
    </PageSection>

    <PageSection title={t("menu.wine.vini-spumanti")}>
        {viniSpumanti.map((vino) => (
            <MenuItem
                name={d(vino.name)!}
                description={d(vino.description)}
                image={d(vino.image)}
                producer={d(vino.producer)}
                location={d(vino.location)}
                tags={d(vino.tags)}
                glass={d(vino.glass)}
                bottle={d(vino.bottle)}
                available={d(vino.available)!}
                visible={d(vino.visible)!}
            />
        ))}
    </PageSection>
</MenuLayout>