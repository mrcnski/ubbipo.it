---
interface Props {
    name: string;
    ingredients?: Array<string>;
    description?: string;
    image?: string;
    producer?: string;
    location?: string;
    tags?: string;
    glass?: string;
    bottle?: string;
    price?: string;
    available: string;
}

import MenuHeading from "@components/MenuHeading.astro";
import MenuImage from "@components/MenuImage.astro";
import MenuIngredients from "@components/MenuIngredients.astro";
import MenuTags from "@components/MenuTags.astro";

const { name, ingredients, description, image, producer, location, tags, glass, bottle, price, available } = Astro.props;
// Filter out empty tags.
var splitTags = tags?.split(",").filter(tag => tag).map(tag => tag.toLowerCase().trim()) ?? [];

import { getLangFromUrl, useTranslations } from '@i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<div class="menu-item">
    <MenuHeading name={name} price={price} glass={glass} bottle={bottle} available={available} bio={splitTags.includes("bio")} />

    <div class="menu-item-content">
        <div class="menu-item-column">
            {(ingredients) && <span class="menu-item-ingredients"><MenuIngredients ingredients={ingredients} /></span>}
            {(description) && <span class="menu-item-description">{description}</span>}
            {(producer) && <span class="producer"><span class="producer-field">{t("menu.producer")}:</span>{producer}</span>}
        </div>
        {(image) && 
            <div class="menu-item-image">
                <MenuImage relativeSrc={image} alt={name} />
            </div>
        }
    </div>

    {(location || splitTags.length > 0) && <MenuTags location={location} tags={splitTags} />}
</div>

<style lang="less">
    .menu-item {
    }
    
    .menu-item-content {
        color: var(--brown);
        
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        row-gap: 1.5rem;
        column-gap: 2rem;

        @media (max-width: 900px) {
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-start;
        }
    }
    .menu-item-ingredients {
        font-size: 16px;
    }
    .menu-item-description {
        font-size: 18px;
    }
    
    .menu-item-column {
        display: flex;
        flex-direction: column;
    }
    .menu-item-image {
        flex: 0 0 auto;
    }
    
    .producer {
        margin-top: 0.5rem;
        font-size: 16px;
    }
    .producer-field {
        margin-right: 0.5rem;
        font-size: 16px;
    }
</style>