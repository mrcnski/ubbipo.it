---
import { Image } from 'astro:assets';
import iconLanguage from "../assets/images/icon-language.svg";

import { languages } from '../i18n/ui';
import { getLangFromUrl, urlToLang, useTranslations, useTranslatedPath } from '../i18n/utils';
const pageLang = getLangFromUrl(Astro.url);
const t = useTranslations(pageLang);
const translatePath = useTranslatedPath(pageLang);
---

<div class="languages-container">
    <!-- <Image src={iconLanguage} alt={t("nav.languages")} width="24" /> -->

    <div class="picker-container">
        {Object.entries(languages).map(([lang, label]) => (
            <a class={"lang-link" + ((pageLang === lang) ? " lang-link-active" : "")}
               href={urlToLang(Astro.url, lang)}
               title={label}
               >
               {lang}
            </a>
        ))}
    </div>
</div>

<style>
    .languages-container {
        display: flex;
        align-items: center;

        padding: 0.25rem;
    }
    
    .picker-container {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .lang-link {
        flex: 1;
        width: 100%;
        
        margin-right: 1rem;
        
        text-align: center;
        text-decoration: none;
        font-size: 20px;
        color: var(--brown);

        transition: background-color 0.3s; /* Transition effect on hover */

        @media (max-width: 700px) {
            font-size: 16px;
        }
    }
	.lang-link:hover {
		background-color: var(--gray-bg);
		color: black;
	}

    .lang-link-active {
        border: 1px solid var(--brown);
    }
</style>